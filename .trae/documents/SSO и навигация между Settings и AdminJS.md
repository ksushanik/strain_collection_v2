## Цели
- Добавить сквозную авторизацию (SSO) между основной частью сервиса и AdminJS: при входе как ADMIN, повторный логин в AdminJS не требуется.
- Объединить навигацию: кнопка входа в админку из страницы `Settings` и доступ по защищённому маршруту.

## Поток SSO
- Клиент уже хранит JWT (`token`) и знает роль пользователя.
- На странице `Settings` для роли `ADMIN` показываем кнопку "Открыть админ‑панель".
- По нажатию:
  1) фронтенд делает `POST /admin/sso` с заголовком `Authorization: Bearer <token>`;
  2) сервер проверяет JWT (через `JwtService.verify`), убеждается в `role === ADMIN`;
  3) при успехе сервер создаёт админ‑сессию (через express‑session) и отвечает 200;
  4) фронтенд открывает `/admin` (в той же вкладке или новой).
- Если пользователь не ADMIN — 403, кнопка скрыта.

## Техническая реализация
### Backend
- В `AdminModule` добавить `customLoader` (Express loader) для AdminJS, чтобы установить промежуточный обработчик и маршрут `/admin/sso`:
  - middleware, который автоматически признаёт активную админ‑сессию при наличии валидного JWT, и задаёт `req.session.adminUser = { email, role }`.
  - маршрут `POST /admin/sso` принимает JWT в `Authorization`, валидирует, создаёт админ‑сессию, возвращает 200.
- Существующая форма email/password остаётся как fallback (можно скрыть при наличии активной админ‑сессии).
- Безопасность:
  - не принимаем токены в query‑параметрах;
  - требуем `Authorization` или cookie `token`;
  - срок жизни сессии — как у `express-session` (настроено), можно ограничить.
- Аудит (опционально): логировать событие `CONFIG` при входе в AdminJS ("AdminJS SSO login").

### Frontend
- В `frontend/src/app/settings/page.tsx`:
  - добавить кнопку "Открыть админ‑панель" (только для роли ADMIN);
  - обработчик: `fetch('/admin/sso', { method: 'POST', headers: { Authorization: 'Bearer ' + token } })` → при 200 вызвать `window.open(<backendBaseUrl + '/admin'>, '_blank')` или навигацию в той же вкладке.
- Альтернатива: если бекенд и фронт в одном хосте, можно открывать `/admin` без портов. Иначе — использовать полный URL бекенда (например `http://localhost:3010/admin`).

## Изменения по файлам
- `backend/src/admin/admin.module.ts`: добавить `customLoader` и маршрут `/admin/sso` с проверкой JWT и установкой admin‑сессии.
- `backend/src/auth` (при необходимости): использовать `JwtService` из `@nestjs/jwt` для верификации токена в админ‑мидлвэре.
- `frontend/src/app/settings/page.tsx`: кнопка с вызовом SSO и переходом в `/admin`.

## Проверка
- Логин как ADMIN в основном приложении.
- Нажать "Открыть админ‑панель" в `Settings`:
  - должен создаться админ‑сеанс и открыться `/admin` без формы логина.
- Проверить отсутствие доступа для не‑ADMIN.
- Линт/тесты backend и frontend зелёные.

## Риски и защита
- Не передавать токен в URL; только `Authorization` или HTTP‑only cookie.
- При раздельных доменах — CORS и `credentials: true` для сессии.
- Ограничить действия AdminJS по ролям; текущая проверка на роль ADMIN остаётся.

Подтвердите — после этого реализую SSO маршрут, мидлвэр, кнопку в Settings и проведу end‑to‑end проверку.